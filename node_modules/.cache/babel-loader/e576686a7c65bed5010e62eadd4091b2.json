{"ast":null,"code":"import _classCallCheck from\"/Users/nguyentrungchinh/project_25/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/nguyentrungchinh/project_25/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/nguyentrungchinh/project_25/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/nguyentrungchinh/project_25/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import'./App.css';import'./App.scss';import axios from'axios';import React from'react';import{Component}from'react';import{useState}from'react';import{inference}from'./inference.js';import{columnNames}from'./inference.js';import{modelDownloadInProgress}from'./inference.js';import Chart from\"react-google-charts\";import Box from'@mui/material/Box';import LinearProgress from'@mui/material/LinearProgress';import ReactFileReader from'react-file-reader';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.onFileChange=function(event){_this.setState({selectedFile:event.target.files[0]});var file=event.target.files[0];var reader=new FileReader();reader.onload=function(event){var file=event.target.result;console.log(file);console.log(file.name);};reader.onerror=function(e){return alert(e.target.error.name);};reader.readAsText(file);};_this.onFileUpload=function(){// axios.post('https://predictive-maintenance-v20.onrender.com/upload', {file: (this.state.selectedFile, this.state.selectedFile.name)}\naxios.post('http://localhost:10000/upload',{file:(_this.state.selectedFile,_this.state.selectedFile.name)}).then(function(res){console.log(res);}).catch(function(err){console.error(err);});var reader=new FileReader();reader.onload=function(){var lines=reader.result.split(\"\\n\");var headers=lines[0].split(',');var currentLine=lines[1].split(',');var textline=[];for(var j=0;j<headers.length;j++){if(j==0){textline[j]=headers[j]+' '+currentLine[j]+'\\n';}else{textline[j]=textline[j-1]+headers[j]+' '+currentLine[j]+'\\n';}}_this.setState({text:textline[headers.length-1]});inference(textline[headers.length-1]).then(function(result){_this.setState({text:_this.state.text,data:result[1],latency:result[0]});});};reader.readAsText(_this.state.selectedFile);};_this.state={text:'',data:columnNames,latency:0.0,downloading:modelDownloadInProgress(),selectedFile:null};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.timerID=setInterval(function(){return _this2.checkModelStatus();},1000);}},{key:\"checkModelStatus\",value:function checkModelStatus(){var _this3=this;this.setState({downloading:modelDownloadInProgress()});if(!this.state.downloading){this.timerID=setInterval(function(){return _this3.checkModelStatus;},5000000);}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"header\",{className:\"App-header\",children:[/*#__PURE__*/_jsx(\"em\",{children:\"Precdictive Maintenance: Transformer Inference\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"font\",{size:\"2\",children:\"If predictive result is true, based on uploading data, please check the components to prevent the system's failure in next step\"})}),/*#__PURE__*/_jsx(Chart,{width:'400px',height:'200px',chartType:\"BarChart\",data:this.state.data,options:{chartArea:{width:'40%'},colors:['yellow'],backgroundColor:'#282c34',legend:{textStyle:{color:'white',fontSize:10},labels:{fontColor:'white'}},vAxis:{textStyle:{color:'white',fontSize:13}},hAxis:{minValue:5,maxValue:50,textStyle:{color:'white'}}}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{children:\"File Upload!\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:this.onFileChange}),/*#__PURE__*/_jsx(\"button\",{onClick:this.onFileUpload,children:\"Upload!\"}),/*#__PURE__*/_jsx(ReactFileReader,{handleFiles:this.handleFiles,fileTypes:'.csv'}),/*#__PURE__*/_jsx(\"textarea\",{cols:60,rows:20,value:this.state.text// value={this.state.csvData}\n,onChange:this.onFileChange,style:{marginTop:15,width:\"50%\"}})]})]}),this.state.downloading&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"font\",{size:\"2\",children:\"Downloading model from CDN to browser..\"}),/*#__PURE__*/_jsx(Box,{sx:{width:'400px'},children:/*#__PURE__*/_jsx(LinearProgress,{})}),/*#__PURE__*/_jsx(\"p\",{})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"font\",{size:\"4\",children:[\"Inference Latency \",this.state.latency,\" ms\"]})})]})});}}]);return App;}(React.Component);export default App;","map":{"version":3,"names":["axios","React","Component","useState","inference","columnNames","modelDownloadInProgress","Chart","Box","LinearProgress","ReactFileReader","App","props","onFileChange","event","setState","selectedFile","target","files","file","reader","FileReader","onload","result","console","log","name","onerror","e","alert","error","readAsText","onFileUpload","post","state","then","res","catch","err","lines","split","headers","currentLine","textline","j","length","text","data","latency","downloading","timerID","setInterval","checkModelStatus","chartArea","width","colors","backgroundColor","legend","textStyle","color","fontSize","labels","fontColor","vAxis","hAxis","minValue","maxValue","handleFiles","marginTop"],"sources":["/Users/nguyentrungchinh/project_25/src/App.jsx"],"sourcesContent":["import './App.css';\nimport './App.scss';\n\nimport axios from 'axios';\nimport React from 'react';\nimport { Component } from 'react';\nimport { useState } from 'react';\n\nimport {inference} from './inference.js';\nimport {columnNames} from './inference.js';\nimport {modelDownloadInProgress} from './inference.js';\nimport Chart from \"react-google-charts\";\nimport Box from '@mui/material/Box';\nimport LinearProgress from '@mui/material/LinearProgress';\n\nimport ReactFileReader from 'react-file-reader';\n\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      text: '',\n      data:columnNames,\n      latency:0.0,\n      downloading:modelDownloadInProgress(),\n      selectedFile: null,\n    };\n\n  }\n\n  componentDidMount() {\n\n    this.timerID = setInterval(\n      () => this.checkModelStatus(),\n      1000\n    );\n  }\n\n  checkModelStatus() {\n    this.setState({\n      downloading: modelDownloadInProgress(),\n    });\n    if (!this.state.downloading) {\n      this.timerID = setInterval(\n        () => this.checkModelStatus,\n        5000000\n      );\n    }\n  }\n\n\n  onFileChange =event => {\n    this.setState({ selectedFile: event.target.files[0] });\n          const file = event.target.files[0]; \n          let reader = new FileReader();\n          reader.onload = function(event) {\n            const file = event.target.result;\n            console.log(file);\n            console.log(file.name);\n          };\n\n          reader.onerror = (e) => alert(e.target.error.name);\n          reader.readAsText(file); \n\n  }\n\n\n  onFileUpload=() => {\n\n    // axios.post('https://predictive-maintenance-v20.onrender.com/upload', {file: (this.state.selectedFile, this.state.selectedFile.name)}\n    axios.post('http://localhost:10000/upload', {file: (this.state.selectedFile, this.state.selectedFile.name)}\n          )\n          .then((res) => {\n            console.log(res);\n            })\n            .catch((err) => {\n                console.error(err)\n            })\n        let reader = new FileReader();\n\n        reader.onload = () => {\n\n          const lines = reader.result.split(\"\\n\");\n          const headers = lines[0].split(',');\n          const currentLine = lines[1].split(',');\n          const textline = [];\n\n          for (let j = 0; j < headers.length; j++) {\n            if (j==0) {\n              textline[j] = (headers[j] + ' ' + currentLine[j] + '\\n');\n            } \n            else {\n              textline[j] = (textline[j-1]+ headers[j] + ' ' + currentLine[j] + '\\n');\n            }\n          }\n\n          this.setState({\n            text: textline[headers.length-1]\n          })\n\n          inference(textline[headers.length-1]).then( result => {\n            this.setState({\n              text : this.state.text,\n              data:result[1],\n              latency:result[0],\n            });\n          })\n\n        };\n        reader.readAsText(this.state.selectedFile);\n\n     };\n\n\n  render() {\n\n    return (\n      <div className=\"App\">\n\n      <header className=\"App-header\">   \n      <em>Precdictive Maintenance: Transformer Inference</em>\n      <div><font size=\"2\">If predictive result is true, based on uploading data, please check the components to prevent the system's failure in next step</font></div>\n      <Chart  \n        width={'400px'}\n        height={'200px'}\n        chartType=\"BarChart\"\n        data={this.state.data}\n        options={{\n          chartArea: { width: '40%'},\n          colors: ['yellow'],\n          backgroundColor: '#282c34',\n          legend: { \n            textStyle: {color: 'white', fontSize: 10},\n            labels: {fontColor:'white'}\n          },\n          vAxis: {\n            textStyle: {\n            color: 'white',\n            fontSize: 13\n          }\n          },\n          hAxis: {\n            minValue: 5,\n            maxValue: 50,\n            textStyle: {\n              color: 'white'\n            }\n          }\n      }}\n      />\n\n      <div>\n        <h5>File Upload!</h5>\n        <div>\n          <input type=\"file\" onChange={this.onFileChange} />\n          <button onClick={this.onFileUpload}>\n            Upload!\n          </button>\n          <ReactFileReader  handleFiles={this.handleFiles} fileTypes={'.csv'}>\n          </ReactFileReader>\n          <textarea\n                cols={60}\n                rows={20}\n                value={this.state.text}\n                // value={this.state.csvData}\n                onChange={this.onFileChange}\n                style={{ marginTop: 15, width: \"50%\" }}\n            ></textarea> \n        </div>\n      </div>\n\n\n      {this.state.downloading && \n        <div><font size=\"2\">Downloading model from CDN to browser..</font>\n        <Box sx={{ width: '400px' }}>\n        <LinearProgress />\n        </Box> \n        <p></p>\n        </div>\n      }\n\n       <div><font size=\"4\">Inference Latency {this.state.latency} ms</font></div>\n  \n      </header> \n\n    </div>   \n    );\n\n\n  };\n  \n\n}\nexport default App;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}