{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nguyentrungchinh/project_14/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/nguyentrungchinh/project_14/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/nguyentrungchinh/project_14/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UPLOAD_ENDPOINT=\"http://localhost:3000\";function uploadfile(){var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),file=_React$useState2[0],setFile=_React$useState2[1];var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),name=_React$useState4[0],setName=_React$useState4[1];var _React$useState5=React.useState(\"\"),_React$useState6=_slicedToArray(_React$useState5,2),status=_React$useState6[0],setStatus=_React$useState6[1];var _useSelector=useSelector(function(state){return state.userLogin;}),userInfo=_useSelector.userInfo;var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var formData,resp;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setStatus(\"\");// Reset status\nevent.preventDefault();formData=new FormData();formData.append(\"avatar\",file);formData.append(\"name\",name);_context.next=7;return axios.post(UPLOAD_ENDPOINT,formData,{headers:{\"content-type\":\"multipart/form-data\",Authorization:\"Bearer \".concat(userInfo.token)}});case 7:resp=_context.sent;setStatus(resp.status===200?\"Thank you!\":\"Error.\");case 9:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"React File Upload\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:function onChange(e){return setFile(e.target.files[0]);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(e){return setName(e.target.value);},value:name}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!(file&&name),children:\"Upload File\"}),status?/*#__PURE__*/_jsx(\"h1\",{children:status}):null]});}export default uploadfile;","map":{"version":3,"names":["React","axios","UPLOAD_ENDPOINT","uploadfile","useState","file","setFile","name","setName","status","setStatus","useSelector","state","userLogin","userInfo","handleSubmit","event","preventDefault","formData","FormData","append","post","headers","Authorization","token","resp","e","target","files","value"],"sources":["/Users/nguyentrungchinh/project_14/src/uploadfile.js"],"sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\n\nconst UPLOAD_ENDPOINT = \"http://localhost:3000\";\n\nfunction uploadfile() {\n  const [file, setFile] = React.useState(null);\n  const [name, setName] = React.useState(\"\");\n  const [status, setStatus] = React.useState(\"\");\n  const { userInfo } = useSelector((state) => state.userLogin);\n\n  const handleSubmit = async (event) => {\n    setStatus(\"\"); // Reset status\n    event.preventDefault();\n    const formData = new FormData();\n    formData.append(\"avatar\", file);\n    formData.append(\"name\", name);\n    const resp = await axios.post(UPLOAD_ENDPOINT, formData, {\n      headers: {\n        \"content-type\": \"multipart/form-data\",\n        Authorization: `Bearer ${userInfo.token}`,\n      },\n    });\n    setStatus(resp.status === 200 ? \"Thank you!\" : \"Error.\");\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <h1>React File Upload</h1>\n      <input type=\"file\" onChange={(e) => setFile(e.target.files[0])} />\n      <input type=\"text\" onChange={(e) => setName(e.target.value)} value={name} />\n      <button type=\"submit\" disabled={!(file && name)}>\n        Upload File\n      </button>\n      {status ? <h1>{status}</h1> : null}\n    </form>\n  );\n}\n\nexport default uploadfile;\n"],"mappings":"wXAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,MAAOC,MAAP,KAAkB,OAAlB,C,wFAEA,GAAMC,gBAAe,CAAG,uBAAxB,CAEA,QAASC,WAAT,EAAsB,CACpB,oBAAwBH,KAAK,CAACI,QAAN,CAAe,IAAf,CAAxB,oDAAOC,IAAP,qBAAaC,OAAb,qBACA,qBAAwBN,KAAK,CAACI,QAAN,CAAe,EAAf,CAAxB,qDAAOG,IAAP,qBAAaC,OAAb,qBACA,qBAA4BR,KAAK,CAACI,QAAN,CAAe,EAAf,CAA5B,qDAAOK,MAAP,qBAAeC,SAAf,qBACA,iBAAqBC,WAAW,CAAC,SAACC,KAAD,QAAWA,MAAK,CAACC,SAAjB,EAAD,CAAhC,CAAQC,QAAR,cAAQA,QAAR,CAEA,GAAMC,aAAY,4FAAG,iBAAOC,KAAP,sIACnBN,SAAS,CAAC,EAAD,CAAT,CAAe;AACfM,KAAK,CAACC,cAAN,GACMC,QAHa,CAGF,GAAIC,SAAJ,EAHE,CAInBD,QAAQ,CAACE,MAAT,CAAgB,QAAhB,CAA0Bf,IAA1B,EACAa,QAAQ,CAACE,MAAT,CAAgB,MAAhB,CAAwBb,IAAxB,EALmB,sBAMAN,MAAK,CAACoB,IAAN,CAAWnB,eAAX,CAA4BgB,QAA5B,CAAsC,CACvDI,OAAO,CAAE,CACP,eAAgB,qBADT,CAEPC,aAAa,kBAAYT,QAAQ,CAACU,KAArB,CAFN,CAD8C,CAAtC,CANA,QAMbC,IANa,eAYnBf,SAAS,CAACe,IAAI,CAAChB,MAAL,GAAgB,GAAhB,CAAsB,YAAtB,CAAqC,QAAtC,CAAT,CAZmB,sDAAH,kBAAZM,aAAY,4CAAlB,CAeA,mBACE,cAAM,QAAQ,CAAEA,YAAhB,wBACE,yCADF,cAEE,cAAO,IAAI,CAAC,MAAZ,CAAmB,QAAQ,CAAE,kBAACW,CAAD,QAAOpB,QAAO,CAACoB,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAD,CAAd,EAA7B,EAFF,cAGE,cAAO,IAAI,CAAC,MAAZ,CAAmB,QAAQ,CAAE,kBAACF,CAAD,QAAOlB,QAAO,CAACkB,CAAC,CAACC,MAAF,CAASE,KAAV,CAAd,EAA7B,CAA6D,KAAK,CAAEtB,IAApE,EAHF,cAIE,eAAQ,IAAI,CAAC,QAAb,CAAsB,QAAQ,CAAE,EAAEF,IAAI,EAAIE,IAAV,CAAhC,yBAJF,CAOGE,MAAM,cAAG,oBAAKA,MAAL,EAAH,CAAuB,IAPhC,GADF,CAWD,CAED,cAAeN,WAAf"},"metadata":{},"sourceType":"module"}